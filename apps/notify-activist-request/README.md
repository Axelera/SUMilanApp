# Notify Activist requests (Lambda)

This code is for a Lambda function that gets triggered by a [Function Hook](https://supabase.com/blog/2021/07/30/supabase-functions-updates#function-hooks-alpha) in the Supabase database to notify about new activists requests in our Slack workspace.

## Usage

### Requirements

- create an Amazon AWS Lambda + API Gateway (REST) resource
- a [Slack Incoming Webhook](https://api.slack.com/messaging/webhooks) for your Slack workspace

### Build

- create a zip package of the function by running:

  ```
  npx nx run notify-activist-request:package
  ```

  this command will create a **zip file** named `notify-activist-request.zip` inside `dist/notify-activist-request` folder

- upload the zip file to Lambda (see [here](https://docs.aws.amazon.com/lambda/latest/dg/configuration-function-zip.html))
- insert all these keys in the **Environment variables** inside Lambda Configuration tab (see [here](https://docs.aws.amazon.com/lambda/latest/dg/configuration-envvars.html)):

```
SLACK_WEBHOOK_URL="<obtained in the requirements>"
```

### Run

Just deploy the Lambda function and the API Gateway that triggers it.

## API reference

**Endpoint** : depends on your API Gateway configuration

**Method** : `POST`

**Auth required** : depends on your API Gateway configuration

**Permissions required** : None

## Request

**type: body**

Generated by the `INSERT` and `UPDATE` triggers of the [Function Hook](https://supabase.com/blog/2021/07/30/supabase-functions-updates#function-hooks-alpha).

**Response codes**

- If response is success, http **status** will be **200**
- If the invocation ends with error, http status will have the standard status: 401, 403, 500, 502, etc depending on your API Gateway configuration.

| code | description |
| ---- | ----------- |
| 200  | âœ… success  |
